<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../../styles/global.css" />
    <link rel="stylesheet" href="style.css" />
    <title>Вакансии</title>
  </head>
  <body>
    <section class="vacancies section container">
      <div class="breadcrumbs">
        <a href="#">
          <span>Главная</span>
        </a>
        <a href="#">
          <span>Вакансии</span>
        </a>
      </div>
      <h1 class="vacancies__title animation-title title">Вакансии</h1>
      <div class="vacancies-wrapper block1">
        <div class="vacancy__container"></div>
        <form action="submit" class="vacancy__form">
          <h3>Хочешь к нам?</h3>
          <p>Пишите на нашу почту hr@greenclinic.kz или заполни форму:</p>
          <input type="text" id="name" placeholder="Ваше имя" />
          <br />
          <input type="email" id="email" placeholder="Ваш email" />
          <br />
          <input type="tel" id="phone-number" placeholder="Ваш телефон" />
          <br />
          <textarea
            name=""
            id="letter"
            cols="30"
            rows="10"
            placeholder="Сопроводительное письмо"
          ></textarea>
          <br />
          <label id="inputLabel" for="file"
            ><svg
              width="17"
              height="18"
              viewBox="0 0 17 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M5.62578 16.98C4.99543 16.9804 4.3791 16.7939 3.85482 16.4439C3.33054 16.0939 2.92189 15.5963 2.6806 15.0139C2.4393 14.4316 2.37622 13.7907 2.49933 13.1725C2.62243 12.5543 2.9262 11.9865 3.37217 11.541L7.8794 7.03378C8.07863 6.83456 8.34885 6.72264 8.6306 6.72265C8.91235 6.72265 9.18256 6.83458 9.38178 7.03381C9.58101 7.23304 9.69293 7.50325 9.69293 7.785C9.69294 8.06675 9.58102 8.33696 9.38179 8.53619L4.87458 13.0434C4.77514 13.1419 4.69614 13.259 4.64211 13.3881C4.58809 13.5172 4.5601 13.6557 4.55976 13.7957C4.55941 13.9356 4.58672 14.0742 4.64012 14.2036C4.69352 14.3329 4.77194 14.4505 4.8709 14.5494C4.96985 14.6484 5.08738 14.7268 5.21674 14.7802C5.34609 14.8336 5.48473 14.8609 5.62467 14.8606C5.76462 14.8603 5.90311 14.8323 6.03221 14.7783C6.16131 14.7242 6.27846 14.6452 6.37694 14.5458L12.3866 8.53619C12.6827 8.2403 12.9175 7.88897 13.0777 7.50229C13.238 7.11561 13.3204 6.70115 13.3204 6.28258C13.3204 5.86402 13.238 5.44956 13.0777 5.06287C12.9175 4.67619 12.6827 4.32487 12.3866 4.02898C11.7796 3.4491 10.9725 3.12551 10.133 3.12551C9.29355 3.12551 8.48639 3.4491 7.8794 4.02898L3.37217 8.53619C3.27352 8.63484 3.15641 8.7131 3.02751 8.76649C2.89862 8.81988 2.76047 8.84736 2.62096 8.84736C2.48145 8.84736 2.3433 8.81989 2.21441 8.7665C2.08551 8.71311 1.9684 8.63485 1.86975 8.5362C1.7711 8.43755 1.69284 8.32043 1.63946 8.19154C1.58607 8.06264 1.55859 7.9245 1.55859 7.78498C1.5586 7.64547 1.58608 7.50732 1.63947 7.37843C1.69286 7.24954 1.77112 7.13243 1.86978 7.03378L6.37694 2.52656C8.38781 0.517838 11.8865 0.517838 13.889 2.52656C14.3824 3.01972 14.7738 3.60526 15.0409 4.24973C15.3079 4.8942 15.4454 5.58497 15.4454 6.28258C15.4454 6.98019 15.3079 7.67096 15.0409 8.31543C14.7738 8.9599 14.3824 9.54544 13.889 10.0386L7.8794 16.0482C7.58354 16.3442 7.23217 16.5788 6.84545 16.7387C6.45873 16.8986 6.04425 16.9806 5.62578 16.98Z"
                fill="#04633E"
              />
            </svg>
            <span id="labelSpan">Добавить файл </span>
          </label>
          <input type="file" id="file" onchange="checkFileSize()" />
          <p>Можете прикрепить резюме размером не более 10 МБ</p>
          <button class="vacancy__form-submit-btn" type="submit">
            Отправить
          </button>
        </form>
      </div>
      <div id="modal">
        <div class="modal__content">
          <p>
            Выбранный файл слишком большой. <br />Пожалуйста, выберите файл
            размером не более 10 МБ.
          </p>
        </div>
      </div>
    </section>
    <script>
      var block1 = document.querySelector(".block1");
      var animation1Triggered = false;

      var options = {
        root: null,
        threshold: 0.5,
      };

      var observerBlock1 = new IntersectionObserver(function (
        entries,
        observer
      ) {
        entries.forEach(function (entry) {
          if (entry.isIntersecting && !animation1Triggered) {
            block1.classList.add("visible");
            animation1Triggered = true;
            observerBlock1.unobserve(block1);
          }
        });
      },
      options);

      observerBlock1.observe(block1);
    </script>
    <script>
      let data = [
        {
          id: 1,
          title: "Врач общей практики",
          date: "06.03.2023",
          information: {
            busyTime: "постоянная",
            internship: "2 месяца",
            schedule: "полный рабочий день",
            experience: "3 года",
          },
        },
        {
          id: 2,
          title: "Врач общей практики",
          date: "06.03.2023",
          information: {
            busyTime: "постоянная",
            internship: "2 месяца",
            schedule: "полный рабочий день",
            experience: "3 года",
          },
        },
        {
          id: 3,
          title: "Врач общей практики",
          date: "06.03.2023",
          information: {
            busyTime: "постоянная",
            internship: "2 месяца",
            schedule: "полный рабочий день",
            experience: "3 года",
          },
        },
        {
          id: 4,
          title: "Врач общей практики",
          date: "06.03.2023",
          information: {
            busyTime: "постоянная",
            internship: "",
            schedule: "полный рабочий день",
            experience: "3 года",
          },
        },
      ];

      console.log(data);

      const vacancyContainer = document.querySelector(".vacancy__container");
      vacancyContainer.innerHTML = "";

      data.forEach((item, index) => {
        vacancyContainer.innerHTML += `
			<div class="vacancy__container-item">
            <div class="vacancy__container-item-top">
              <h3>${item.title}</h3>
              <svg
                class="open-close"
                width="18"
                height="18"
                viewBox="0 0 18 18"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M13.5 11.25L9 6.75L4.5 11.25"
                  stroke="#FFCA79"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
            </div>
            <p>Вакансия опубликована ${item.date}</p>
            <div class="vacancy__container-item-details">
              <p>Информация о вакансии:</p>
              <ul>
                <li>Тип занятости ${item.information.busyTime}</li>
					 ${
             item.information.internship !== ""
               ? `<li>Стажировка (${item.information.internship})</li>`
               : ""
           }
                
                <li>График работы ${item.information.schedule}</li>
                <li>Опыт работы ${item.information.experience}</li>
              </ul>
            </div>
          </div>
			`;
      });
    </script>
    <script>
      const vacancyContainerItemDetails = document.querySelectorAll(
        ".vacancy__container-item-details"
      );
      const buttons = document.querySelectorAll(".open-close");
      const vacancyContainerItem = document.querySelectorAll(
        ".vacancy__container-item"
      );
      vacancyContainerItem.forEach((elem, index) => {
        elem.addEventListener("click", () => {
          console.log("click");
          vacancyContainerItemDetails[index].classList.toggle("visible");
          buttons[index].classList.toggle("rotate");
        });
      });
    </script>
    <script>
      const vacancyFormSubmitBtn = document.querySelector(
        ".vacancy__form-submit-btn"
      );

      const labelSpan = document.getElementById("labelSpan");

      function checkFileSize() {
        var fileInput = document.getElementById("file");
        var labelSpan = document.getElementById("labelSpan");

        var file = fileInput.files[0];
        var maxSize = 10 * 1024 * 1024;

        if (file && file.size > maxSize) {
          const modal = document.getElementById("modal");
          modal.style.display = "flex";
          setTimeout(() => (modal.style.display = "none"), 2000);
          fileInput.value = "";
          labelSpan.textContent = "Добавить файл";
        } else if (file) {
          labelSpan.textContent = file.name;
        } else {
          labelSpan.textContent = "Добавить файл";
        }
      }

      function submitForm() {
        event.preventDefault();

        var name = document.getElementById("name").value;
        var email = document.getElementById("email").value;
        var phoneNumber = document.getElementById("phone-number").value;
        var letter = document.getElementById("letter").value;
        var file = document.getElementById("file").files[0];
        var reader = new FileReader();

        let formData = {
          name: name,
          email: email,
          phoneNumber: phoneNumber,
          letter: letter,
          file: file,
        };
        console.log(formData);

        name = "";
        email = "";
        phoneNumber = "";
        letter = "";
        file = "";
      }

      vacancyFormSubmitBtn.addEventListener("click", (event) => {
        submitForm();
      });
    </script>
  </body>
</html>
